---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "rafay_addon Resource - terraform-provider-rafay"
subcategory: ""
description: |-
  
---

# rafay_addon (Resource)

Add-ons extend the functionality of Kubernetes. 

## Example Usage
YAML Upload Example

```terraform
resource "rafay_addon" "tfdemoaddon1" {
  metadata {
    name    = "tfdemoaddon1"
    project = "terraform"
    labels = {
      env  = "dev"
      name = "app"
    }
  }
  spec {
    namespace = "tftestnamespace"
    version   = "v1.0"
    artifact {
      type = "Yaml"
      artifact {
        paths {
          name = "file://artifacts/tfdemoaddon1/busybox.yaml"
        }

      }
    }
    sharing {
      enabled = false
    }
  }
}
```

---

Helm Chart Upload Example

```terraform
resource "rafay_addon" "tfdemoaddon2" {
  metadata {
    name    = "tfdemoaddon2"
    project = "terraform"
    labels = {
      env  = "dev"
      name = "app"
    }
  }
  spec {
    namespace = "tftestnamespace"
    version   = "v1.0"
    artifact {
      type = "Helm"
      artifact {
        chart_path {
          name = "file://artifacts/tfdemoaddon2/apache-9.0.9.tgz"
        }
      }
    }
    sharing {
      enabled = false
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Argument Reference

---

***Required***

- `metadata` - (Block List, Max: 1) Contains data that helps uniquely identify the resource. (See [below for nested schema](#nestedblock--metadata))
- `spec` - (Block List, Max: 1) Defines the characteristics for the resource. (See [below for nested schema](#nestedblock--spec))


***Optional***

- `timeouts` - (Block) Sets the duration of time the create, delete, and update functions are allowed to run. If the function takes longer than this, it is assumed the function has failed. The default is 10 minutes. (See [below for nested schema](#nestedblock--timeouts))

---

<a id="nestedblock--metadata"></a>
### Nested Schema for `metadata`

***Required***

- `name` - (String) The name of the resource. This must be unique to the organization. 
- `project` - (String) The Rafay project(s) the resource belongs to. 

***Optional***

- `labels` - (Block) . Labels are key/value pairs that are attached to objects, such as pods. Labels are intended to be used to specify identifying attributes of objects that are meaningful and relevant to users.
---

<a id="nestedblock--spec"></a>
### Nested Schema for `spec`

***Required***

- `artifact` - (Block List, Max: 1) Contains data about the artifact. (See [below for nested schema](#nestedblock--spec--artifact))
- `namespace` - (String) The namespace the add-on belongs to. 
- `sharing` - (Block List, Max: 1) The sharing configuration for the add-on. An add-on can be shared with one or more projects. (See [below for nested schema](#nestedblock--spec--sharing))
    Note: If the resource is not shared, set enabled = false. 
- `version` - (String) The version of the add-on. 

<a id="nestedblock--spec--artifact"></a>
### Nested Schema for `spec.artifact`

***Required***

- `artifact` - (Block List, Max: 1) Contains data about the artifact repository. (See [below for nested schema](#nestedblock--spec--artifact--artifact))
- `type` - (String) The type of artifact. Supported values are: `Helm`, `Yaml`, and `AlertManager`. 


<a id="nestedblock--spec--artifact--artifact"></a>
### Nested Schema for `spec.artifact.artifact`

**Note**: 
- For Yaml type add-on, `paths` is required. 
- For Helm type add-on:
  - If uploading the chart, `chart_path` is required.
  - If pulling the chart from the Helm, `repository` and `chart_name` are required.
  - If pulling the chart from the Git, `repository`, `chart_path`, and `revision` are required. 


***Optional***

- `catalog` (String) The name of the Helm catalog.
- `chart_name` - (String) The name of the chart. 
- `chart_path` - (Block List, Max: 1) The relative path to the chart file in the Git repository. (See [below for nested schema](#nestedblock--spec--artifact--artifact--chart_path))
- `chart_version` - (String) The version of the chart. 
- `configmap` - (Block List, Max: 1) The relative path to the alert manager configmap file. (See [below for nested schema](#nestedblock--spec--artifact--artifact--chart_path))
- `configuration` - (Block List, Max: 1) The relative path to the alert manager configuration file. (See [below for nested schema](#nestedblock--spec--artifact--artifact--chart_path))
- `paths` - (Block List) The relative path to the file in the Git repository. (See [below for nested schema](#nestedblock--spec--artifact--artifact--chart_path))
- `repository` - (String) The name of the helm repository.
- `revision` - (String) The branch or tag in the Git repository. 
- `secret` - (Block List, Max: 1) The relative path to the alert manager secret file. (See [below for nested schema](#nestedblock--spec--artifact--artifact--chart_path))
- `statefulset` - (Block List, Max: 1) The relative path to the alert manager statefulset file. (See [below for nested schema](#nestedblock--spec--artifact--artifact--chart_path))
- `values_paths` - (Block List) The relative path to the values file. (See [below for nested schema](#nestedblock--spec--artifact--artifact--chart_path))

<a id="nestedblock--spec--artifact--artifact--chart_path"></a>
### Nested Schema for various resources under `spec.artifact.artifact.chart_path`, `.configmap`, `.configuration`, `.paths`, `.secret`, `.statefulset`, and `.value_paths`

***Required***

- `name` - (String) The relative path of the artifact. 


<a id="nestedblock--spec--sharing"></a>
### Nested Schema for `spec.sharing`

***Required***

- `enabled` - (Boolean) Enable sharing for this resource. 

***Optional***

- `projects` - (Block List) The list of projects this resource is shared with. (See [below for nested schema](#nestedblock--spec--sharing--projects))


<a id="nestedblock--spec--sharing--projects"></a>
### Nested Schema for `spec.sharing.projects`

***Required***

- `name` - (String) The names of the projects the resource belongs to. 

Note: To share a resource across all projects in an organisation, below spec can be used
 ```
     sharing {
      enabled = true
      projects {
        name = "*"
      }
    }
```

<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

***Optional***
- `create` - (String) Sets the timeout duration for creating a resource. The default timeout is 10 minutes. 
- `delete` - (String) Sets the timeout duration for deleting a resource. The default timeout is 10 minutes. 
- `update` - (String) Sets the timeout duration for updating a resource. The default timeout is 10 minutes. 



## Attribute Reference

---

- `id` - (String) The ID of the resource, generated by the system after you create the resource. 


# rafay_addon (data source)
## Example Usage

---

```terraform
data "rafay_addon" "tfdemoaddon1" {
  metadata {
	name    = "tfdemoaddon1"
	project = "terraform"
  }
}

output "addon_spec" {
  description = "spec"
  value       = data.rafay_addon.tfdemoaddon1.spec
}
```
---

# rafay_addon (import )
## Example Usage
below command will help to import existing addon resource from controller to state file

---
```
terraform import rafay_addon.tfdemoaddon1 addOnName/projectName
```
above command will import resource without `artifact` object (i.e `artifact` will be ignored) , to import proper `artifact` object refer below command
OR
```
terraform import rafay_addon.tfdemoaddon1 addOnName/projectName/show_artifact
```
`show_artifact` string in the end will update state file with artifact object

---
