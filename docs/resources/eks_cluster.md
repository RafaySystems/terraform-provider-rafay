---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "rafay_eks_cluster Resource - terraform-provider-rafay"
subcategory: ""
description: |-
  
---

# rafay_eks_cluster (Resource)



## Example Usage

```terraform
resource "rafay_eks_cluster" "eksclusterbasic" {
  cluster {
    kind = "Cluster"
    metadata {
      name    = "test-cluster2"
      project = "dev"
    }
    spec {
      type           = "eks"
      blueprint      = "default"
      cloud_provider = "hardik-eks-role"
      cni_provider   = "aws-cni"
      proxy_config   = {}
    }
  }
  cluster_config {
    apiversion = "rafay.io/v1alpha5"
    kind       = "ClusterConfig"
    metadata {
      name    = "test-cluster2"
      region  = "us-west-2"
      version = "1.21"
    }
    node_groups {
      name       = "ng-57658a87"
      ami_family = "AmazonLinux2"
      iam {
        iam_node_group_with_addon_policies {
          image_builder = true
          auto_scaler   = true
        }
      }
      instance_type    = "t3.xlarge"
      desired_capacity = 1
      min_size         = 1
      max_size         = 2
      volume_size      = 80
      volume_type      = "gp3"
    }
    vpc {
      cidr = "192.168.0.0/16"
      cluster_endpoints {
        private_access = true
        public_access  = false
      }
      nat {
        gateway = "Single"
      }
    }
  }
}

resource "rafay_eks_cluster" "eksspot" {
  cluster {
    kind = "Cluster"
    metadata {
      name    = "test-spot"
      project = "dev"
    }
    spec {
      type           = "eks"
      blueprint      = "default"
      cloud_provider = "hardik-eks-role"
      cni_provider   = "aws-cni"
      proxy_config   = {}
    }
  }
  cluster_config {
    apiversion = "rafay.io/v1alpha5"
    kind       = "ClusterConfig"
    metadata {
      name    = "test-spot"
      region  = "us-west-2"
      version = "1.21"
    }
    node_groups {
      name     = "spot-ng-1"
      min_size = 0
      max_size = 4
      instances_distribution {
        max_price                                = 0.017
        instance_types                           = ["t3.xlarge"]
        on_demand_base_capacity                  = 0
        on_demand_percentage_above_base_capacity = 0
        spot_instance_pools                      = 2
      }
    }
  }
}

resource "rafay_eks_cluster" "eksmanagedcustom" {
  cluster {
    kind = "Cluster"
    metadata {
      name    = "test-managed-custom2"
      project = "dev"
    }
    spec {
      type           = "eks"
      blueprint      = "default"
      cloud_provider = "hardik-eks-role"
      cni_provider   = "aws-cni"
      proxy_config   = {}
    }
  }
  cluster_config {
    apiversion = "rafay.io/v1alpha5"
    kind       = "ClusterConfig"
    metadata {
      name    = "test-managed-custom2"
      region  = "us-west-2"
      version = "1.21"
    }
    vpc {
      subnets {
        private {
          name = "subnet-1"
          id   = "subnet-06e2a2cea8270483d"
        }
        private {
          name = "subnet-2"
          id   = "subnet-032b5640e54cee1d2"
        }
        public {
          name = "subnet-3"
          id   = "subnet-076ae102f8593bc63"
        }
        public {
          name = "subnet-4"
          id   = "subnet-05389b9c0829a4c30"
        }
      }
    }
    managed_nodegroups {
      name             = "managed-ng-1"
      instance_type    = "t3.large"
      desired_capacity = 1
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **cluster** (Block List, Min: 1) cluster yaml file (see [below for nested schema](#nestedblock--cluster))
- **cluster_config** (Block List, Min: 1) cluster config yaml file (see [below for nested schema](#nestedblock--cluster_config))

### Optional

- **id** (String) The ID of this resource.
- **timeouts** (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

<a id="nestedblock--cluster"></a>
### Nested Schema for `cluster`

Required:

- **spec** (Block List, Min: 1) contains cluster networking options (see [below for nested schema](#nestedblock--cluster--spec))

Optional:

- **kind** (String) kind
- **metadata** (Block List) defines the configuration for KMS encryption provider (see [below for nested schema](#nestedblock--cluster--metadata))

<a id="nestedblock--cluster--spec"></a>
### Nested Schema for `cluster.spec`

Optional:

- **blueprint** (String) Blueprint associated with the cluster
- **blueprint_version** (String) Blueprint version associated with the cluster
- **cloud_provider** (String) Cloud credentials provider used to create and manage the cluster
- **cni_provider** (String) Cni provider used to specify different cni options for the cluster
- **proxy_config** (Map of String) Configure Proxy if your infrastructure uses an Outbound Proxy
- **type** (String) Cluster Type


<a id="nestedblock--cluster--metadata"></a>
### Nested Schema for `cluster.metadata`

Required:

- **name** (String) EKS Cluster name
- **project** (String) Project for the cluster

Optional:

- **labels** (Map of String) Cluster Labels



<a id="nestedblock--cluster_config"></a>
### Nested Schema for `cluster_config`

Required:

- **metadata** (Block List, Min: 1) contains cluster networking options (see [below for nested schema](#nestedblock--cluster_config--metadata))

Optional:

- **addons** (Block List) holds the EKS addon configuration (see [below for nested schema](#nestedblock--cluster_config--addons))
- **apiversion** (String) apiversion
- **availability_zones** (List of String) availability zones of a cluster
- **cloud_watch** (Block List) holds all CloudWatch attributes of a cluster (see [below for nested schema](#nestedblock--cluster_config--cloud_watch))
- **fargate_profiles** (Block List) defines the settings used to schedule workload onto Fargate. (see [below for nested schema](#nestedblock--cluster_config--fargate_profiles))
- **iam** (Block List) holds all IAM attributes of a cluster (see [below for nested schema](#nestedblock--cluster_config--iam))
- **identity_providers** (Block List) holds an identity provider configuration. (see [below for nested schema](#nestedblock--cluster_config--identity_providers))
- **kind** (String) kind
- **kubernetes_network_config** (Block List) contains cluster networking options (see [below for nested schema](#nestedblock--cluster_config--kubernetes_network_config))
- **managed_nodegroups** (Block List) holds all nodegroup attributes of a cluster. (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups))
- **node_groups** (Block List) holds all nodegroup attributes of a cluster. (see [below for nested schema](#nestedblock--cluster_config--node_groups))
- **private_cluster** (Block List) allows configuring a fully-private cluster in which no node has outbound internet access, and private access to AWS services is enabled via VPC endpoints (see [below for nested schema](#nestedblock--cluster_config--private_cluster))
- **secrets_encryption** (Block List) defines the configuration for KMS encryption provider (see [below for nested schema](#nestedblock--cluster_config--secrets_encryption))
- **vpc** (Block List) holds global subnet and all child subnets (see [below for nested schema](#nestedblock--cluster_config--vpc))

<a id="nestedblock--cluster_config--metadata"></a>
### Nested Schema for `cluster_config.metadata`

Required:

- **name** (String) EKS Cluster name
- **region** (String) the AWS region hosting this cluster

Optional:

- **annotations** (Map of String) arbitrary metadata ignored by the vendor
- **tags** (Map of String) used to tag AWS resources created by the vendor
- **version** (String) Valid variants are: '1.16', '1.17', '1.18', '1.19', '1.20' (default), '1.21'.


<a id="nestedblock--cluster_config--addons"></a>
### Nested Schema for `cluster_config.addons`

Required:

- **name** (String) EKS addon name

Optional:

- **attach_policy** (String) holds a policy document to attach
- **attach_policy_arns** (List of String) list of ARNs of the IAM policies to attach
- **permissions_boundary** (String) ARN of the permissions boundary to associate
- **service_account_role_arn** (String) service account role ARN
- **tags** (Map of String) The metadata to apply to the cluster to assist with categorization and organization. Each tag consists of a key and an optional value, both of which you define.
- **version** (String) EKS addon version
- **well_known_policies** (Block List) for attaching common IAM policies (see [below for nested schema](#nestedblock--cluster_config--addons--well_known_policies))

<a id="nestedblock--cluster_config--addons--well_known_policies"></a>
### Nested Schema for `cluster_config.addons.well_known_policies`

Optional:

- **auto_scaler** (Boolean) service account annotations
- **aws_load_balancer_controller** (Boolean) adds policies for using the aws-load-balancer-controller.
- **cert_manager** (Boolean) adds cert-manager policies.
- **ebs_csi_controller** (Boolean) adds cert-manager policies.
- **efs_csi_controller** (Boolean) adds policies for using the ebs-csi-controller.
- **external_dns** (Boolean) adds external-dns policies for Amazon Route 53.
- **image_builder** (Boolean) allows for full ECR (Elastic Container Registry) access.



<a id="nestedblock--cluster_config--cloud_watch"></a>
### Nested Schema for `cluster_config.cloud_watch`

Required:

- **cluster_logging** (Block List, Min: 1) container config parameters related to cluster logging (see [below for nested schema](#nestedblock--cluster_config--cloud_watch--cluster_logging))

<a id="nestedblock--cluster_config--cloud_watch--cluster_logging"></a>
### Nested Schema for `cluster_config.cloud_watch.cluster_logging`

Optional:

- **enable_types** (List of String) Types of logging to enable. Valid entries are: 'api', 'audit', 'authenticator', 'controllerManager', 'scheduler', 'all', '*'.



<a id="nestedblock--cluster_config--fargate_profiles"></a>
### Nested Schema for `cluster_config.fargate_profiles`

Required:

- **name** (String) name of the fargate profile
- **pod_execution_role_arn** (String) IAM role's ARN to use to run pods onto Fargate.
- **selectors** (Block List, Min: 1) define the rules to select workload to schedule onto Fargate. (see [below for nested schema](#nestedblock--cluster_config--fargate_profiles--selectors))
- **status** (String) The current status of the Fargate profile.
- **subnets** (List of String) define the rules to select workload to schedule onto Fargate.
- **tags** (Map of String) Used to tag the AWS resources

<a id="nestedblock--cluster_config--fargate_profiles--selectors"></a>
### Nested Schema for `cluster_config.fargate_profiles.selectors`

Required:

- **labels** (Map of String) Kubernetes label selectors to use to select workload.
- **namespace** (String) Kubernetes namespace from which to select workload.



<a id="nestedblock--cluster_config--iam"></a>
### Nested Schema for `cluster_config.iam`

Optional:

- **fargate_pod_execution_role_arn** (String) role used by pods to access AWS APIs. This role is added to the Kubernetes RBAC for authorization.
- **fargate_pod_execution_role_permissions_boundary** (String) permissions boundary for the fargate pod execution role.
- **service_accounts** (Block List) service accounts to create in the cluster. (see [below for nested schema](#nestedblock--cluster_config--iam--service_accounts))
- **service_role_arn** (String) service role ARN of the cluster
- **service_role_permission_boundary** (String) permissions boundary for all identity-based entities created by the vendor.
- **vpc_resource_controller_policy** (Boolean) attaches the IAM policy necessary to run the VPC controller in the control plane
- **with_oidc** (String) enables the IAM OIDC provider as well as IRSA for the Amazon CNI plugin

<a id="nestedblock--cluster_config--iam--service_accounts"></a>
### Nested Schema for `cluster_config.iam.service_accounts`

Required:

- **labels** (Map of String) CIDR range from where ClusterIPs are assigned

Optional:

- **annotations** (Map of String) CIDR range from where ClusterIPs are assigned
- **attach_policy** (Block List, Max: 1) AWS tags for the service account (see [below for nested schema](#nestedblock--cluster_config--iam--service_accounts--attach_policy))
- **attach_policy_arns** (List of String) CIDR range from where ClusterIPs are assigned
- **attach_role_arn** (String) ARN of the role to attach to the service account
- **name** (String) service account name
- **namespace** (String) service account namespace
- **permissions_boundary** (String) ARN of the permissions boundary to associate with the service account
- **role_name** (String) Specific role name instead of the Cloudformation-generated role name
- **role_only** (Boolean) Specify if only the IAM Service Account role should be created without creating/annotating the service account
- **status** (Block List) holds status of the IAM service account (see [below for nested schema](#nestedblock--cluster_config--iam--service_accounts--status))
- **tags** (Map of String) AWS tags for the service account
- **well_known_policies** (Block List) for attaching common IAM policies (see [below for nested schema](#nestedblock--cluster_config--iam--service_accounts--well_known_policies))

<a id="nestedblock--cluster_config--iam--service_accounts--attach_policy"></a>
### Nested Schema for `cluster_config.iam.service_accounts.well_known_policies`

Optional:

- **string** (String)


<a id="nestedblock--cluster_config--iam--service_accounts--status"></a>
### Nested Schema for `cluster_config.iam.service_accounts.well_known_policies`

Optional:

- **role_arn** (String) role ARN associated with the service account.


<a id="nestedblock--cluster_config--iam--service_accounts--well_known_policies"></a>
### Nested Schema for `cluster_config.iam.service_accounts.well_known_policies`

Optional:

- **auto_scaler** (Boolean) service account annotations
- **aws_load_balancer_controller** (Boolean) adds policies for using the aws-load-balancer-controller.
- **cert_manager** (Boolean) adds cert-manager policies.
- **ebs_csi_controller** (Boolean) adds cert-manager policies.
- **efs_csi_controller** (Boolean) adds policies for using the ebs-csi-controller.
- **external_dns** (Boolean) adds external-dns policies for Amazon Route 53.
- **image_builder** (Boolean) allows for full ECR (Elastic Container Registry) access.




<a id="nestedblock--cluster_config--identity_providers"></a>
### Nested Schema for `cluster_config.identity_providers`

Optional:

- **type** (String) Valid variants are: 'oidc': OIDC identity provider


<a id="nestedblock--cluster_config--kubernetes_network_config"></a>
### Nested Schema for `cluster_config.kubernetes_network_config`

Optional:

- **ip_family** (String) Valid variants are: 'IPv4' defines an IP family of v4 to be used when creating a new VPC and cluster., 'IPv6' defines an IP family of v6 to be used when creating a new VPC and cluster..
- **service_ipv4_cidr** (String) CIDR range from where ClusterIPs are assigned


<a id="nestedblock--cluster_config--managed_nodegroups"></a>
### Nested Schema for `cluster_config.managed_nodegroups`

Required:

- **name** (String) name of the node group

Optional:

- **ami** (String) Specify custom AMIs, auto-ssm, auto, or static
- **ami_family** (String) Valid variants are: 'AmazonLinux2'.
- **asg_suspend_processes** (List of String) See relevant AWS docs
- **avalability_zones** (List of String) Limit nodes to specific AZs
- **bottle_rocket** (Block List) specifies settings for Bottlerocket nodes (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups--bottle_rocket))
- **desired_capacity** (Number) desired capacity of instances in the nodegroup
- **disable_imdsv1** (Boolean) requires requests to the metadata service to use IMDSv2 tokens
- **disable_pods_imds** (Boolean) blocks all IMDS requests from non host networking pods
- **ebs_optimized** (Boolean) enables EBS optimization
- **efa_enbaled** (Boolean) creates the maximum allowed number of EFA-enabled network cards on nodes in this group.
- **iam** (Block List) holds all IAM attributes of a NodeGroup (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups--iam))
- **instance_name** (String) for instances in the nodegroup
- **instance_prefix** (String) for instances in the nodegroup
- **instance_selector** (Block List) specifies options for EC2 instance selector (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups--instance_selector))
- **instance_type** (String) type of instances in the nodegroup
- **instance_types** (List of String) specifies a list of instance types
- **labels** (Map of String) labels on nodes in the nodegroup
- **launch_tempelate** (Block List) used by the scaling config, see cloudformation docs (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups--launch_tempelate))
- **max_pods_per_node** (Number) Maximum pods per node
- **max_size** (Number) maximum size of instances in the nodegroup
- **min_size** (Number) minimum size of instances in the nodegroup
- **override_bootstrap_command** (String) Override the vendor's bootstrapping script
- **placement** (Block List) specifies the placement group in which nodes should be spawned (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups--placement))
- **pre_bootstrap_commands** (List of String) executed before bootstrapping instances to the cluster
- **private_networking** (Boolean) Enable private networking for nodegroup
- **security_groups** (Block List) controls security groups for this nodegroup (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups--security_groups))
- **spot** (Boolean) create a spot nodegroup
- **ssh** (Block List) configures ssh access for this nodegroup (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups--ssh))
- **subnets** (List of String) Limit nodes to specific subnets
- **tags** (Map of String) Applied to the Autoscaling Group and to the EC2 instances (unmanaged), Applied to the EKS Nodegroup resource and to the EC2 instances (managed)
- **taints** (Block List) taints to apply to the nodegroup (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups--taints))
- **update_config** (Block List) used by the scaling config, see cloudformation docs (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups--update_config))
- **volume_encrypted** (Boolean) of volumes attached to instances in the nodegroup
- **volume_iops** (Number) of volumes attached to instances in the nodegroup
- **volume_kms_key_id** (String) of volumes attached to instances in the nodegroup
- **volume_name** (String) of volumes attached to instances in the nodegroup
- **volume_size** (Number) in gigabytes
- **volume_throughput** (Number) of volumes attached to instances in the nodegroup
- **volume_type** (String) Valid variants are: 'gp2' is General Purpose SSD, 'gp3' is General Purpose SSD which can be optimised for high throughput (default), 'io1' is Provisioned IOPS SSD, 'sc1' is Cold HDD, 'st1' is Throughput Optimized HDD.

<a id="nestedblock--cluster_config--managed_nodegroups--bottle_rocket"></a>
### Nested Schema for `cluster_config.managed_nodegroups.bottle_rocket`

Required:

- **settings** (Map of String) contains any bottlerocket settings

Optional:

- **enable_admin_container** (Boolean) Enable admin container


<a id="nestedblock--cluster_config--managed_nodegroups--iam"></a>
### Nested Schema for `cluster_config.managed_nodegroups.iam`

Optional:

- **attach_policy_arns** (List of String) attach polciy ARN
- **iam_node_group_with_addon_policies** (Block List) holds all IAM attributes of a NodeGroup (see [below for nested schema](#nestedblock--cluster_config--managed_nodegroups--iam--iam_node_group_with_addon_policies))
- **instance_profile_arn** (String) instance profile ARN
- **instance_role_arn** (String) instance role ARN
- **instance_role_name** (String) instance role Name
- **instance_role_permission_boundary** (String) instance role permissions boundary

<a id="nestedblock--cluster_config--managed_nodegroups--iam--iam_node_group_with_addon_policies"></a>
### Nested Schema for `cluster_config.managed_nodegroups.iam.instance_role_permission_boundary`

Optional:

- **alb_ingress** (Boolean) enables access to ALB Ingress controller
- **app_mesh** (Boolean) enables full access to AppMesh
- **app_mesh_review** (Boolean) enables full access to AppMesh Preview
- **auto_scaler** (Boolean) enables IAM policy for cluster-autoscaler
- **cert_manager** (Boolean) enables the ability to add records to Route 53 in order to solve the DNS01 challenge.
- **cloud_watch** (Boolean) enables access to cloud watch
- **ebs** (Boolean) enables the new EBS CSI (Elastic Block Store Container Storage Interface) driver
- **efs** (Boolean) enables full access to EFS
- **external_dns** (Boolean) adds the external-dns project policies for Amazon Route 53
- **fsx** (Boolean) enables full access to FSX
- **image_builder** (Boolean) allows for full ECR (Elastic Container Registry) access. This is useful for building, for example, a CI server that needs to push images to ECR
- **xray** (Boolean) enables access to XRay



<a id="nestedblock--cluster_config--managed_nodegroups--instance_selector"></a>
### Nested Schema for `cluster_config.managed_nodegroups.instance_selector`

Optional:

- **cpu_architecture** (String) CPU Architecture of the EC2 instance type. Valid variants are: 'x86_64' 'amd64' 'arm64'
- **gpus** (Number) specifies the number of GPUs. It can be set to 0 to select non-GPU instance types.
- **memory** (String) specifies the memory The unit defaults to GiB
- **vcpus** (Number) specifies the number of vCPUs


<a id="nestedblock--cluster_config--managed_nodegroups--launch_tempelate"></a>
### Nested Schema for `cluster_config.managed_nodegroups.launch_tempelate`

Optional:

- **id** (String) key of taint
- **version** (String) value of taint


<a id="nestedblock--cluster_config--managed_nodegroups--placement"></a>
### Nested Schema for `cluster_config.managed_nodegroups.placement`

Optional:

- **group** (String) placement group name


<a id="nestedblock--cluster_config--managed_nodegroups--security_groups"></a>
### Nested Schema for `cluster_config.managed_nodegroups.security_groups`

Optional:

- **attach_ids** (List of String) attaches additional security groups to the nodegroup
- **with_local** (Boolean) attach a security group local to this nodegroup Not supported for managed nodegroups
- **with_shared** (Boolean) attach the security group shared among all nodegroups in the cluster


<a id="nestedblock--cluster_config--managed_nodegroups--ssh"></a>
### Nested Schema for `cluster_config.managed_nodegroups.ssh`

Optional:

- **allow** (Boolean) If Allow is true the SSH configuration provided is used, otherwise it is ignored. Only one of PublicKeyPath, PublicKey and PublicKeyName can be configured
- **enable_ssm** (Boolean) Enables the ability to SSH onto nodes using SSM
- **public_key** (String) Public key to be added to the nodes SSH keychain. If Allow is false this value is ignored.
- **public_key_name** (String) Public key name in EC2 to be added to the nodes SSH keychain. If Allow is false this value is ignored.
- **source_security_group_ids** (List of String) source securitgy group IDs


<a id="nestedblock--cluster_config--managed_nodegroups--taints"></a>
### Nested Schema for `cluster_config.managed_nodegroups.taints`

Optional:

- **effect** (String) effect of taint
- **key** (String) key of taint
- **value** (String) value of taint


<a id="nestedblock--cluster_config--managed_nodegroups--update_config"></a>
### Nested Schema for `cluster_config.managed_nodegroups.update_config`

Optional:

- **max_unavailable** (Number) sets the max number of nodes that can become unavailable when updating a nodegroup (specified as number)
- **max_unavailable_percentage** (Number) sets the max number of nodes that can become unavailable when updating a nodegroup (specified as percentage)



<a id="nestedblock--cluster_config--node_groups"></a>
### Nested Schema for `cluster_config.node_groups`

Optional:

- **ami** (String) Specify custom AMIs, auto-ssm, auto, or static
- **ami_family** (String) Valid variants are: 'AmazonLinux2' (default), 'Ubuntu2004', 'Ubuntu1804', 'Bottlerocket', 'WindowsServer2019CoreContainer', 'WindowsServer2019FullContainer', 'WindowsServer2004CoreContainer'.
- **asg_metrics_collection** (Block List) used by the scaling config, see cloudformation docs (see [below for nested schema](#nestedblock--cluster_config--node_groups--asg_metrics_collection))
- **asg_suspend_processes** (List of String) See relevant AWS docs
- **availability_zones** (List of String) Limit nodes to specific AZs
- **bottle_rocket** (Block List) specifies settings for Bottlerocket nodes (see [below for nested schema](#nestedblock--cluster_config--node_groups--bottle_rocket))
- **classic_load_balancer_names** (List of String) Associate load balancers with auto scaling group
- **cluster_dns** (String) Custom address used for DNS lookups
- **cpu_credits** (String) configures T3 Unlimited, valid only for T-type instances
- **desired_capacity** (Number) Desired capacity of instances in the nodegroup
- **disable_imdsv1** (Boolean) requires requests to the metadata service to use IMDSv2 tokens
- **disable_pods_imds** (Boolean) blocks all IMDS requests from non host networking pods
- **ebs_optimized** (Boolean) enables EBS optimization
- **efa_endbaled** (Boolean) creates the maximum allowed number of EFA-enabled network cards on nodes in this group.
- **iam** (Block List) holds all IAM attributes of a NodeGroup (see [below for nested schema](#nestedblock--cluster_config--node_groups--iam))
- **instance_name** (String) for instances in the nodegroup
- **instance_prefix** (String) for instances in the nodegroup
- **instance_selector** (Block List) specifies options for EC2 instance selector (see [below for nested schema](#nestedblock--cluster_config--node_groups--instance_selector))
- **instance_type** (String) type of instances in the nodegroup
- **instances_distribution** (Block List) holds the configuration for spot instances (see [below for nested schema](#nestedblock--cluster_config--node_groups--instances_distribution))
- **kubelet_extra_config** (String) Custom address used for DNS lookups
- **labels** (Map of String) labels on nodes in the nodegroup
- **max_pods_per_node** (Number) Maximum pods per node
- **max_size** (Number) Maximum size of instances in the nodegroup
- **min_size** (Number) Minimum size of instances in the nodegroup
- **name** (String) name of the node group
- **override_bootstrap_command** (String) Override the vendor's bootstrapping script
- **placement** (Block List) specifies the placement group in which nodes should be spawned (see [below for nested schema](#nestedblock--cluster_config--node_groups--placement))
- **pre_bootstrap_commands** (List of String) executed before bootstrapping instances to the cluster
- **private_networking** (Boolean) Enable private networking for nodegroup
- **security_groups** (Block List) controls security groups for this nodegroup (see [below for nested schema](#nestedblock--cluster_config--node_groups--security_groups))
- **ssh** (Block List) configures ssh access for this nodegroup (see [below for nested schema](#nestedblock--cluster_config--node_groups--ssh))
- **subnet_cidr** (String) Create new subnet from the CIDR block and limit nodes to this subnet (Applicable only for the WavelenghZone nodes)
- **subnets** (List of String) Limit nodes to specific subnets
- **tags** (Map of String) Applied to the Autoscaling Group and to the EC2 instances (unmanaged), Applied to the EKS Nodegroup resource and to the EC2 instances (managed)
- **taints** (Block List) taints to apply to the nodegroup (see [below for nested schema](#nestedblock--cluster_config--node_groups--taints))
- **target_group_arns** (List of String) Associate target group with auto scaling group
- **update_config** (Block List) used by the scaling config, see cloudformation docs (see [below for nested schema](#nestedblock--cluster_config--node_groups--update_config))
- **version** (String) Kuberenetes version for the nodegroup
- **volume_encrypted** (Boolean) of volumes attached to instances in the nodegroup
- **volume_iops** (Number) of volumes attached to instances in the nodegroup
- **volume_kms_key_id** (String) of volumes attached to instances in the nodegroup
- **volume_name** (String) of volumes attached to instances in the nodegroup
- **volume_size** (Number) volume size in gigabytes
- **volume_throughput** (Number) of volumes attached to instances in the nodegroup
- **volume_type** (String) Valid variants are: 'gp2' is General Purpose SSD, 'gp3' is General Purpose SSD which can be optimised for high throughput (default), 'io1' is Provisioned IOPS SSD, 'sc1' is Cold HDD, 'st1' is Throughput Optimized HDD.

<a id="nestedblock--cluster_config--node_groups--asg_metrics_collection"></a>
### Nested Schema for `cluster_config.node_groups.asg_metrics_collection`

Optional:

- **granularity** (String) of metrics collected
- **metrics** (List of String) specifies a list of metrics


<a id="nestedblock--cluster_config--node_groups--bottle_rocket"></a>
### Nested Schema for `cluster_config.node_groups.bottle_rocket`

Required:

- **settings** (Map of String) contains any bottlerocket settings

Optional:

- **enable_admin_container** (Boolean) Enable admin container


<a id="nestedblock--cluster_config--node_groups--iam"></a>
### Nested Schema for `cluster_config.node_groups.iam`

Optional:

- **attach_policy_arns** (List of String) attach polciy ARN
- **iam_node_group_with_addon_policies** (Block List) holds all IAM attributes of a NodeGroup (see [below for nested schema](#nestedblock--cluster_config--node_groups--iam--iam_node_group_with_addon_policies))
- **instance_profile_arn** (String) instance profile ARN
- **instance_role_arn** (String) instance role ARN
- **instance_role_name** (String) instance role Name
- **instance_role_permission_boundary** (String) instance role permissions boundary

<a id="nestedblock--cluster_config--node_groups--iam--iam_node_group_with_addon_policies"></a>
### Nested Schema for `cluster_config.node_groups.iam.instance_role_permission_boundary`

Optional:

- **alb_ingress** (Boolean) enables access to ALB Ingress controller
- **app_mesh** (Boolean) enables full access to AppMesh
- **app_mesh_review** (Boolean) enables full access to AppMesh Preview
- **auto_scaler** (Boolean) enables IAM policy for cluster-autoscaler
- **cert_manager** (Boolean) enables the ability to add records to Route 53 in order to solve the DNS01 challenge.
- **cloud_watch** (Boolean) enables access to cloud watch
- **ebs** (Boolean) enables the new EBS CSI (Elastic Block Store Container Storage Interface) driver
- **efs** (Boolean) enables full access to EFS
- **external_dns** (Boolean) adds the external-dns project policies for Amazon Route 53
- **fsx** (Boolean) enables full access to FSX
- **image_builder** (Boolean) allows for full ECR (Elastic Container Registry) access. This is useful for building, for example, a CI server that needs to push images to ECR
- **xray** (Boolean) enables access to XRay



<a id="nestedblock--cluster_config--node_groups--instance_selector"></a>
### Nested Schema for `cluster_config.node_groups.instance_selector`

Optional:

- **cpu_architecture** (String) CPU Architecture of the EC2 instance type. Valid variants are: 'x86_64' 'amd64' 'arm64'
- **gpus** (Number) specifies the number of GPUs. It can be set to 0 to select non-GPU instance types.
- **memory** (String) specifies the memory The unit defaults to GiB
- **vcpus** (Number) specifies the number of vCPUs


<a id="nestedblock--cluster_config--node_groups--instances_distribution"></a>
### Nested Schema for `cluster_config.node_groups.instances_distribution`

Optional:

- **capacity_rebalance** (Boolean) Enable capacity rebalancing for spot instances
- **instance_types** (List of String) Enable admin container
- **max_price** (Number) Maximum bid price in USD
- **on_demand_base_capacity** (Number) base number of on-demand instances (non-negative)
- **on_demand_percentage_above_base_capacity** (Number) Range [0-100]
- **spot_allocation_strategy** (String) allocation strategy for spot instances. Valid values are capacity-optimized and lowest-price
- **spot_instance_pools** (Number) Range [0-20]


<a id="nestedblock--cluster_config--node_groups--placement"></a>
### Nested Schema for `cluster_config.node_groups.placement`

Optional:

- **group** (String) placement group name


<a id="nestedblock--cluster_config--node_groups--security_groups"></a>
### Nested Schema for `cluster_config.node_groups.security_groups`

Optional:

- **attach_ids** (List of String) attaches additional security groups to the nodegroup
- **with_local** (Boolean) attach a security group local to this nodegroup Not supported for managed nodegroups
- **with_shared** (Boolean) attach the security group shared among all nodegroups in the cluster


<a id="nestedblock--cluster_config--node_groups--ssh"></a>
### Nested Schema for `cluster_config.node_groups.ssh`

Optional:

- **allow** (Boolean) If Allow is true the SSH configuration provided is used, otherwise it is ignored. Only one of PublicKeyPath, PublicKey and PublicKeyName can be configured
- **enable_ssm** (Boolean) Enables the ability to SSH onto nodes using SSM
- **public_key** (String) Public key to be added to the nodes SSH keychain. If Allow is false this value is ignored.
- **public_key_name** (String) Public key name in EC2 to be added to the nodes SSH keychain. If Allow is false this value is ignored.
- **source_security_group_ids** (List of String) source securitgy group IDs


<a id="nestedblock--cluster_config--node_groups--taints"></a>
### Nested Schema for `cluster_config.node_groups.taints`

Optional:

- **effect** (String) effect of taint
- **key** (String) key of taint
- **value** (String) value of taint


<a id="nestedblock--cluster_config--node_groups--update_config"></a>
### Nested Schema for `cluster_config.node_groups.update_config`

Optional:

- **max_unavaliable** (Number) sets the max number of nodes that can become unavailable when updating a nodegroup (specified as number)
- **max_unavaliable_percetage** (Number) sets the max number of nodes that can become unavailable when updating a nodegroup (specified as percentage)



<a id="nestedblock--cluster_config--private_cluster"></a>
### Nested Schema for `cluster_config.private_cluster`

Optional:

- **additional_endpoint_services** (List of String) specifies additional endpoint services that must be enabled for private access. Valid entries are: 'cloudformation', 'autoscaling', 'logs'
- **enabled** (Boolean) enables creation of a fully-private cluster
- **skip_endpoint_creation** (Boolean) skips the creation process for endpoints completely. This is only used in case of an already provided VPC and if the user decided to set it to true.


<a id="nestedblock--cluster_config--secrets_encryption"></a>
### Nested Schema for `cluster_config.secrets_encryption`

Optional:

- **key_arn** (String) KMS key ARN


<a id="nestedblock--cluster_config--vpc"></a>
### Nested Schema for `cluster_config.vpc`

Optional:

- **auto_allocate_ipv6** (Boolean) AutoAllocateIPV6 requests an IPv6 CIDR block with /56 prefix for the VPC
- **cidr** (String) AWS VPC ID.
- **cluster_endpoints** (Block List) Manage access to the Kubernetes API server endpoints. (see [below for nested schema](#nestedblock--cluster_config--vpc--cluster_endpoints))
- **extra_cidrs** (List of String) for additional CIDR associations, e.g. a CIDR for private subnets or any ad-hoc subnets
- **id** (String) AWS VPC ID.
- **ipv6_cidr** (String) n/a
- **ipv6_pool** (String) n/a
- **manage_shared_node_security_group_rules** (Boolean) Automatically add security group rules to and from the default cluster security group and the shared node security group. This allows unmanaged nodes to communicate with the control plane and managed nodes. This option cannot be disabled when using vendor created security groups.
- **nat** (Block List) NAT config (see [below for nested schema](#nestedblock--cluster_config--vpc--nat))
- **public_access_cidrs** (List of String) which CIDR blocks to allow access to public k8s API endpoint
- **security_group** (String) (aka the ControlPlaneSecurityGroup) for communication between control plane and nodes
- **shared_node_security_group** (String) for pre-defined shared node SG
- **subnets** (Block List) keyed by AZ for convenience. (see [below for nested schema](#nestedblock--cluster_config--vpc--subnets))

<a id="nestedblock--cluster_config--vpc--cluster_endpoints"></a>
### Nested Schema for `cluster_config.vpc.cluster_endpoints`

Optional:

- **private_access** (Boolean) enable private access to the Kubernetes API server endpoints.
- **public_access** (Boolean) enable public access to the Kubernetes API server endpoints.


<a id="nestedblock--cluster_config--vpc--nat"></a>
### Nested Schema for `cluster_config.vpc.nat`

Optional:

- **gateway** (String) Valid variants are: 'HighlyAvailable' configures a highly available NAT gateway, 'Single' configures a single NAT gateway (default), 'Disable' disables NAT.


<a id="nestedblock--cluster_config--vpc--subnets"></a>
### Nested Schema for `cluster_config.vpc.subnets`

Optional:

- **private** (Block List) holds subnet to AZ mappings. If the key is an AZ, that also becomes the name of the subnet otherwise use the key to refer to this subnet. (see [below for nested schema](#nestedblock--cluster_config--vpc--subnets--private))
- **public** (Block List) holds subnet to AZ mappings. If the key is an AZ, that also becomes the name of the subnet otherwise use the key to refer to this subnet. (see [below for nested schema](#nestedblock--cluster_config--vpc--subnets--public))

<a id="nestedblock--cluster_config--vpc--subnets--private"></a>
### Nested Schema for `cluster_config.vpc.subnets.public`

Optional:

- **az** (String) dont know what this is, not in docs
- **id** (String) id of subnet
- **name** (String) name of subnet


<a id="nestedblock--cluster_config--vpc--subnets--public"></a>
### Nested Schema for `cluster_config.vpc.subnets.public`

Optional:

- **az** (String) dont know what this is, not in docs
- **id** (String) id of subnet
- **name** (String) name of subnet





<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- **create** (String)
- **delete** (String)
- **update** (String)


