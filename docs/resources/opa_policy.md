---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "rafay_opa_policy Resource - terraform-provider-rafay"
subcategory: ""
description: |-
  
---

# rafay_opa_policy (Resource)

Create an Open Policy Agent (OPA) policy resource. 

## Example Usage

---

```terraform
#Basic example for opa policy
resource "rafay_opa_policy" "tftestopapolicy1" {
  metadata {
    name    = "tftestopapolicy1"
    project = "terraform"
  }
  spec {
    constraint_list {
      name = "se-linux"
    }
    installation_params {
      audit_interval              = 60
      audit_match_kind_only       = true
      constraint_violations_limit = 20
      audit_chunk_size = 20
      log_denies = true
      emit_audit_events = true
    }
    sharing {
      enabled = true
      projects {
        name = "defaultproject"
      }
    }
    version = "v0"
    sync_objects{
      version = "v1"
      kind = "ConfigMap"
      group = "tfuser"
    }
    excluded_namespaces {
      namespaces {
        name = "tfdemonamespace"
      }
    }
  }
}
```


## Argument Reference

---
***Required***
- `metadata` - (Block List, Max: 1) Contains data that helps uniquely identify the resource. (See [below for nested schema](#nestedblock--metadata))
- `spec` - (Block List, Max: 1) Defines the characteristics for the resource. This is the desired state for the resource. (See [below for nested schema](#nestedblock--spec))

***Optional***

- `timeouts` - (Block) Sets the duration of time the create, delete, and update functions are allowed to run. If the function takes longer than this, it is assumed the function has failed. The default is 10 minutes. (See [below for nested schema](#nestedblock--timeouts))

---

<a id="nestedblock--metadata"></a>
### Nested Schema for `metadata`

***Required***
- `name` - (String) The name of the resource. This must be unique in your organization. 
- `project` - (String) The name of the Rafay project the OPA policy will be created in. 


---

<a id="nestedblock--spec"></a>
### Nested Schema for `spec`

***Required***

- `version` - (String) The version of the OPA policy. 


***Optional***

- `constraint_list` - (Block List) The constraint information. (See [below for nested schema](#nestedblock--spec--constraint_list))
- `excluded_namespaces` - (Block List) List of namespaces excluded from the Gatekeeper process. (See [below for nested schema](#nestedblock--spec--excluded_namespaces))
- `installation_params` - (Block List, Max: 1) The OPA policy installation parameters. (See [below for nested schema](#nestedblock--spec--installation_params))
- `sharing` - (Block List, Max: 1) Enables sharing the OPA policy. (See [below for nested schema](#nestedblock--spec--sharing))


<a id="nestedblock--spec--constraint_list"></a>
### Nested Schema for `spec.constraint_list` 

***Required*** 

- `name` - (String) The name of the constraint. 


<a id="nestedblock--spec--excluded_namespaces"></a>
### Nested Schema for `spec.excluded_namespaces`

***Optional***

- `namespaces` - (Block List) List of namespaces to be excluded. (See [below for nested schema](#nestedblock--spec--excluded_namespaces--namespaces)) 
- `processes` - (List of String) List of processes excluded from the namespace. 


<a id="nestedblock--spec--excluded_namespaces--namespaces"></a>
### Nested Schema for `spec.excluded_namespaces.namespaces`

***Required***

- `name` - (String) Name of the resource. 


<a id="nestedblock--spec--installation_params"></a>
### Nested Schema for `spec.installation_params` 

***Optional*** 

- `audit_chunk_size` - (Number) The audit upload chunk size. 
- `audit_from_cache` - (Boolean) Enables using cache for the audit. 
- `audit_interval` - (Number) The time, in seconds, after which the audit will occur. 
- `audit_match_kind_only` - (Boolean) Enables matching kind only. 
- `constraint_violations_limit` - (Number) The number of violations to be listed in the constraint. 
- `emit_admission_events` - (Boolean) Enables the emission of all admission violations as K8s events. 
- `emit_audit_events` - (Boolean) Enables the emission of all audit violations as K8s events. 
- `enable_delete_operations` - (Boolean) Enables deleting operations. 
- `experimental_enable_mutation` - (Boolean) Enables the mutating admission controller. 
- `log_denies` - (Boolean) Enables admission time logs. 


<a id="nestedblock--spec--sharing"></a>
### Nested Schema for `spec.sharing` 

***Optional*** 

- `enabled` - (Boolean) Enables sharing the OPA policy. 
- `projects` - (Block List) List of projects this resource is shared with. (See [below for nested schema](#nestedblock--spec--sharing--projects)) 


<a id="nestedblock--spec--sharing--projects"></a>
### Nested Schema for `spec.sharing.projects`

***Required***

- `name` - (String) Name of the project. 


<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

***Optional***
- `create` - (String) Sets the timeout duration for creating a resource. The default timeout is 10 minutes. 
- `delete` - (String) Sets the timeout duration for deleting a resource. The default timeout is 10 minutes. 
- `update` - (String) Sets the timeout duration for updating a resource. The default timeout is 10 minutes. 


## Attribute Reference

---

- `id` - (String) The ID of the resource, generated by the system after you create the resource. 
